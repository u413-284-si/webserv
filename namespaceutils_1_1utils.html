<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="generator" content="Doxygen 1.9.8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>webserv: utils.utils Namespace Reference</title>
	<link href="tabs.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen.css" rel="stylesheet" type="text/css" />
	<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
	<script type="text/javascript">
		DoxygenAwesomeDarkModeToggle.init()
	</script>
	<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
	<script type="text/javascript">
		DoxygenAwesomeFragmentCopyButton.init()
	</script>
	<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
	<script type="text/javascript">
		DoxygenAwesomeParagraphLink.init()
	</script>
</head>
<body>
		<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
			<div id="titlearea">
				<table cellspacing="0" cellpadding="0">
					<tbody>
						<tr id="projectrow">
							<td id="projectalign">
								<div id="projectname">webserv
								</div>
								<div id="projectbrief">This is when you finally understand why a URL starts with HTTP.</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<!-- end header part --><!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespaceutils_1_1utils.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">utils.utils Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad958e9c03f86e7be9b4807b13f46e47b" id="r_ad958e9c03f86e7be9b4807b13f46e47b"><td class="memItemLeft" align="right" valign="top">subprocess.Popen&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1utils.html#ad958e9c03f86e7be9b4807b13f46e47b">start_server</a> (<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">server_executable</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">config_file</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">bool</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">with_coverage</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">kcov_output_dir</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">kcov_excl_path</a>)</td></tr>
<tr class="separator:ad958e9c03f86e7be9b4807b13f46e47b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ec2d820bd35a25bcf0c3cfcfc9b57c7" id="r_a1ec2d820bd35a25bcf0c3cfcfc9b57c7"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1utils.html#a1ec2d820bd35a25bcf0c3cfcfc9b57c7">stop_server</a> (subprocess.Popen <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">server_process</a>)</td></tr>
<tr class="separator:a1ec2d820bd35a25bcf0c3cfcfc9b57c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3af1d70388f9fddbe9db9d0b80ce4278" id="r_a3af1d70388f9fddbe9db9d0b80ce4278"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1utils.html#a3af1d70388f9fddbe9db9d0b80ce4278">wait_for_startup</a> (subprocess.Popen <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">server_process</a>)</td></tr>
<tr class="separator:a3af1d70388f9fddbe9db9d0b80ce4278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d54ba64b047b2391b1f2c8eec05f1d" id="r_a89d54ba64b047b2391b1f2c8eec05f1d"><td class="memItemLeft" align="right" valign="top">requests.Response&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1utils.html#a89d54ba64b047b2391b1f2c8eec05f1d">make_request</a> (<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">url</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> method=&quot;GET&quot;, Optional[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">dict</a>] <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">params</a>=None, Optional[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">dict</a>] headers=None, Optional[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">dict</a>] <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">data</a>=None, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">int</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">timeout</a>=10, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">bool</a> <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">allow_redirects</a>=<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">True</a>)</td></tr>
<tr class="separator:a89d54ba64b047b2391b1f2c8eec05f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097e70e974853af0922608b8628c4c19" id="r_a097e70e974853af0922608b8628c4c19"><td class="memItemLeft" align="right" valign="top">Dict[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1utils.html#a097e70e974853af0922608b8628c4c19">parse_http_response</a> (socket.socket <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">sock</a>)</td></tr>
<tr class="separator:a097e70e974853af0922608b8628c4c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad958e9c03f86e7be9b4807b13f46e47b" name="ad958e9c03f86e7be9b4807b13f46e47b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad958e9c03f86e7be9b4807b13f46e47b">&#9670;&#160;</a></span>start_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> subprocess.Popen utils.utils.start_server </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>&#160;</td>
          <td class="paramname"><em>server_executable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>&#160;</td>
          <td class="paramname"><em>config_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">bool</a>&#160;</td>
          <td class="paramname"><em>with_coverage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>&#160;</td>
          <td class="paramname"><em>kcov_output_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>
&#160;</td>
          <td class="paramname"><em>kcov_excl_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Starts the server with or without coverage.

Args:
    server_executable (str): The path to the server executable.
    config_file (str): The path to the configuration file.
    with_coverage (bool): Whether or not to run with code coverage.
    kcov_output_dir (str): The directory for the coverage output.
    kcov_excl_path (str): The path to the exclusions file for kcov.

Returns:
    subprocess.Popen: The process object that represents the running server.
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00009">9</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   15</span>) -&gt; <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">subprocess.Popen</a>:</div>
<div class="line"><span class="lineno">   16</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   17</span><span class="stringliteral">    Starts the server with or without coverage.</span></div>
<div class="line"><span class="lineno">   18</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   19</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">   20</span><span class="stringliteral">        server_executable (str): The path to the server executable.</span></div>
<div class="line"><span class="lineno">   21</span><span class="stringliteral">        config_file (str): The path to the configuration file.</span></div>
<div class="line"><span class="lineno">   22</span><span class="stringliteral">        with_coverage (bool): Whether or not to run with code coverage.</span></div>
<div class="line"><span class="lineno">   23</span><span class="stringliteral">        kcov_output_dir (str): The directory for the coverage output.</span></div>
<div class="line"><span class="lineno">   24</span><span class="stringliteral">        kcov_excl_path (str): The path to the exclusions file for kcov.</span></div>
<div class="line"><span class="lineno">   25</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   26</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   27</span><span class="stringliteral">        subprocess.Popen: The process object that represents the running server.</span></div>
<div class="line"><span class="lineno">   28</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   29</span>    <span class="keywordflow">if</span> with_coverage:</div>
<div class="line"><span class="lineno">   30</span>    <span class="comment"># Create the kcov output directory if it doesn&#39;t exist</span></div>
<div class="line"><span class="lineno">   31</span>        <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">os.makedirs</a>(kcov_output_dir, exist_ok=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">   32</span>        server_process = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">subprocess.Popen</a>([<span class="stringliteral">&quot;kcov&quot;</span>, kcov_excl_path, kcov_output_dir, server_executable, config_file])</div>
<div class="line"><span class="lineno">   33</span>        print(<span class="stringliteral">&quot;Running server with coverage (kcov)...&quot;</span>)</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   35</span>        server_process = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">subprocess.Popen</a>([server_executable, config_file])</div>
<div class="line"><span class="lineno">   36</span>        print(<span class="stringliteral">&quot;Running server without coverage...&quot;</span>)</div>
<div class="line"><span class="lineno">   37</span>    <span class="keywordflow">return</span> server_process</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="ttc" id="a_status_code_8hpp_html_a0506d82d6e3d6758981ff5eac9ca85ea"><div class="ttname"><a href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">statusCode</a></div><div class="ttdeci">statusCode</div><div class="ttdef"><b>Definition</b> <a href="_status_code_8hpp_source.html#l00008">StatusCode.hpp:8</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ec2d820bd35a25bcf0c3cfcfc9b57c7" name="a1ec2d820bd35a25bcf0c3cfcfc9b57c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ec2d820bd35a25bcf0c3cfcfc9b57c7">&#9670;&#160;</a></span>stop_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None utils.utils.stop_server </td>
          <td>(</td>
          <td class="paramtype">subprocess.Popen&#160;</td>
          <td class="paramname"><em>server_process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Terminates and waits for the server process to stop.

Args:
    server_process (subprocess.Popen): The process object of the running server.

Returns:
    None
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00039">39</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span><span class="keyword">def </span>stop_server(server_process: subprocess.Popen) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   40</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">    Terminates and waits for the server process to stop.</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">        server_process (subprocess.Popen): The process object of the running server.</span></div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">        None</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   49</span>    <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">server_process.terminate</a>()</div>
<div class="line"><span class="lineno">   50</span>    <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">server_process.wait</a>()</div>
<div class="line"><span class="lineno">   51</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3af1d70388f9fddbe9db9d0b80ce4278" name="a3af1d70388f9fddbe9db9d0b80ce4278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3af1d70388f9fddbe9db9d0b80ce4278">&#9670;&#160;</a></span>wait_for_startup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None utils.utils.wait_for_startup </td>
          <td>(</td>
          <td class="paramtype">subprocess.Popen&#160;</td>
          <td class="paramname"><em>server_process</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Waits for the server to start by checking its health endpoint.

If the server does not start within the timeout period, it stops the server
and exits the test with an error.

Args:
    server_process (subprocess.Popen): The process object of the server.

Returns:
    None
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00052">52</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   52</span><span class="keyword">def </span>wait_for_startup(server_process: subprocess.Popen) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   53</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">    Waits for the server to start by checking its health endpoint.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">    If the server does not start within the timeout period, it stops the server</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    and exits the test with an error.</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   59</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">   60</span><span class="stringliteral">        server_process (subprocess.Popen): The process object of the server.</span></div>
<div class="line"><span class="lineno">   61</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   62</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">   63</span><span class="stringliteral">        None</span></div>
<div class="line"><span class="lineno">   64</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   65</span>    timeout = 10 <span class="comment"># Timeout period in seconds</span></div>
<div class="line"><span class="lineno">   66</span>    start_time = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">time.time</a>()</div>
<div class="line"><span class="lineno">   67</span>    <span class="comment"># Keep checking the server health until the timeout is reached</span></div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">while</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">time.time</a>() - start_time &lt; timeout:</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   70</span>            response = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.get</a>(<span class="stringliteral">&quot;http://localhost:8080/health&quot;</span>)</div>
<div class="line"><span class="lineno">   71</span>            <span class="keywordflow">if</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">response.status_code</a> == 200:</div>
<div class="line"><span class="lineno">   72</span>                <span class="keywordflow">break</span> <span class="comment"># Server started successfully</span></div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">except</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.ConnectionError</a>:</div>
<div class="line"><span class="lineno">   74</span>            <span class="keywordflow">pass</span> <span class="comment"># Server not reachable, continue retrying</span></div>
<div class="line"><span class="lineno">   75</span>        <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">time.sleep</a>(0.1)  <span class="comment"># Small delay between retries</span></div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   77</span>        <span class="comment"># If the loop ends without breaking, raise an error</span></div>
<div class="line"><span class="lineno">   78</span>        stop_server(server_process)</div>
<div class="line"><span class="lineno">   79</span>        <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">pytest.exit</a>(<span class="stringliteral">&quot;Server did not start within the timeout period.&quot;</span>)</div>
<div class="line"><span class="lineno">   80</span> </div>
<div class="line"><span class="lineno">   81</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a89d54ba64b047b2391b1f2c8eec05f1d" name="a89d54ba64b047b2391b1f2c8eec05f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d54ba64b047b2391b1f2c8eec05f1d">&#9670;&#160;</a></span>make_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> requests.Response utils.utils.make_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>&#160;</td>
          <td class="paramname"><em>url</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a> &#160;</td>
          <td class="paramname"><em>method</em> = <code>&quot;GET&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">dict</a>] &#160;</td>
          <td class="paramname"><em>params</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">dict</a>] &#160;</td>
          <td class="paramname"><em>headers</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">dict</a>] &#160;</td>
          <td class="paramname"><em>data</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">int</a> &#160;</td>
          <td class="paramname"><em>timeout</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">bool</a> &#160;</td>
          <td class="paramname"><em>allow_redirects</em> = <code><a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">True</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Make an HTTP request with the specified method, URL, and parameters.

Args:
    url (str): The URL to request.
    method (str): The HTTP method to use ('GET', 'POST', 'DELETE').
    params (Optional[dict]): The query parameters to include in the URL.
    headers (Optional[dict]): The headers to include in the request.
    data (Optional[dict]): The payload for POST or DELETE requests, or a callable that generates chunks.
    timeout (int): The timeout in seconds for the request.
    allow_redirects (bool): Whether to follow redirects automatically.

Returns:
    requests.Response: The response object from the request.

Raises:
    pytest.fail: If the request fails.
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00082">82</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>) -&gt; <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.Response</a>:</div>
<div class="line"><span class="lineno">   91</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    Make an HTTP request with the specified method, URL, and parameters.</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">        url (str): The URL to request.</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">        method (str): The HTTP method to use (&#39;GET&#39;, &#39;POST&#39;, &#39;DELETE&#39;).</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral">        params (Optional[dict]): The query parameters to include in the URL.</span></div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">        headers (Optional[dict]): The headers to include in the request.</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">        data (Optional[dict]): The payload for POST or DELETE requests, or a callable that generates chunks.</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">        timeout (int): The timeout in seconds for the request.</span></div>
<div class="line"><span class="lineno">  101</span><span class="stringliteral">        allow_redirects (bool): Whether to follow redirects automatically.</span></div>
<div class="line"><span class="lineno">  102</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  103</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  104</span><span class="stringliteral">        requests.Response: The response object from the request.</span></div>
<div class="line"><span class="lineno">  105</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  106</span><span class="stringliteral">    Raises:</span></div>
<div class="line"><span class="lineno">  107</span><span class="stringliteral">        pytest.fail: If the request fails.</span></div>
<div class="line"><span class="lineno">  108</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  109</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  110</span>        <span class="comment"># Handle GET request</span></div>
<div class="line"><span class="lineno">  111</span>        <span class="keywordflow">if</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">method.upper</a>() == <span class="stringliteral">&quot;GET&quot;</span>:</div>
<div class="line"><span class="lineno">  112</span>            response = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.get</a>(url, params=params, headers=headers, timeout=timeout, allow_redirects=allow_redirects)</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>        <span class="comment"># Handle POST request</span></div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">elif</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">method.upper</a>() == <span class="stringliteral">&quot;POST&quot;</span>:</div>
<div class="line"><span class="lineno">  116</span>            <span class="keywordflow">if</span> callable(data):</div>
<div class="line"><span class="lineno">  117</span>                response = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.post</a>(url, params=params, data=data(), headers=headers, timeout=timeout, allow_redirects=allow_redirects)</div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  119</span>                response = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.post</a>(url, params=params, data=data, headers=headers, timeout=timeout, allow_redirects=allow_redirects)</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>        <span class="comment"># Handle DELETE request</span></div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">elif</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">method.upper</a>() == <span class="stringliteral">&quot;DELETE&quot;</span>:</div>
<div class="line"><span class="lineno">  123</span>            <span class="keywordflow">if</span> callable(data):</div>
<div class="line"><span class="lineno">  124</span>                response = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.delete</a>(url, params=params, data=data(), headers=headers, timeout=timeout, allow_redirects=allow_redirects)</div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  126</span>                response = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.delete</a>(url, params=params, data=data, headers=headers, timeout=timeout, allow_redirects=allow_redirects)</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  129</span>            <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">pytest.fail</a>(f<span class="stringliteral">&quot;Unsupported HTTP method: {method}&quot;</span>)</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">return</span> response</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">except</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">requests.exceptions.RequestException</a> <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">  134</span>        <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">pytest.fail</a>(f<span class="stringliteral">&quot;Failed to make request to {url} with method {method}: {e}&quot;</span>, pytrace=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">  135</span> </div>
</div><!-- fragment -->
</div>
</div>
<a id="a097e70e974853af0922608b8628c4c19" name="a097e70e974853af0922608b8628c4c19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a097e70e974853af0922608b8628c4c19">&#9670;&#160;</a></span>parse_http_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Dict[<a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>, <a class="el" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">str</a>] utils.utils.parse_http_response </td>
          <td>(</td>
          <td class="paramtype">socket.socket&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Parse the HTTP response from a socket object and return the status code, headers, and body.

Args:
    sock (socket.socket): The socket object from which to receive the HTTP response.

Returns:
    dict: A dictionary containing:
        - "status_code" (str): The HTTP status code.
        - "headers" (dict): The HTTP headers, as a dictionary of key-value pairs.
        - "body" (str): The body content of the HTTP response, if any.
</pre> 
<p class="definition">Definition at line <a class="el" href="utils_8py_source.html#l00136">136</a> of file <a class="el" href="utils_8py_source.html">utils.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span><span class="keyword">def </span>parse_http_response(sock: socket.socket) -&gt; Dict[str, str]:</div>
<div class="line"><span class="lineno">  137</span>    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">    Parse the HTTP response from a socket object and return the status code, headers, and body.</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">    Args:</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">        sock (socket.socket): The socket object from which to receive the HTTP response.</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  143</span><span class="stringliteral">    Returns:</span></div>
<div class="line"><span class="lineno">  144</span><span class="stringliteral">        dict: A dictionary containing:</span></div>
<div class="line"><span class="lineno">  145</span><span class="stringliteral">            - &quot;status_code&quot; (str): The HTTP status code.</span></div>
<div class="line"><span class="lineno">  146</span><span class="stringliteral">            - &quot;headers&quot; (dict): The HTTP headers, as a dictionary of key-value pairs.</span></div>
<div class="line"><span class="lineno">  147</span><span class="stringliteral">            - &quot;body&quot; (str): The body content of the HTTP response, if any.</span></div>
<div class="line"><span class="lineno">  148</span><span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  149</span>    <span class="comment"># Receive the full response (4096 bytes at a time)</span></div>
<div class="line"><span class="lineno">  150</span>    response_data = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">sock.recv</a>(4096)</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <span class="comment"># Decode response into a string using UTF-8 encoding</span></div>
<div class="line"><span class="lineno">  153</span>    response_str = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">response_data.decode</a>(<span class="stringliteral">&#39;utf-8&#39;</span>)</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    <span class="comment"># Split the response string into lines (separated by \r\n)</span></div>
<div class="line"><span class="lineno">  156</span>    response_lines = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">response_str.split</a>(<span class="stringliteral">&#39;\r\n&#39;</span>)</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>    <span class="comment"># Extract the status line (first line of the response)</span></div>
<div class="line"><span class="lineno">  159</span>    status_line = response_lines[0]</div>
<div class="line"><span class="lineno">  160</span>    status_code = int(<a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">status_line.split</a>()[1])  <span class="comment"># Extract the status code from the status line</span></div>
<div class="line"><span class="lineno">  161</span> </div>
<div class="line"><span class="lineno">  162</span>    <span class="comment"># Parse the headers from the remaining lines</span></div>
<div class="line"><span class="lineno">  163</span>    headers = {}</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">for</span> line <span class="keywordflow">in</span> response_lines[1:]:</div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">if</span> <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">line.strip</a>() == <span class="stringliteral">&quot;&quot;</span>:  <span class="comment"># An empty line indicates the end of headers</span></div>
<div class="line"><span class="lineno">  166</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  167</span>        key, value = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">line.split</a>(<span class="stringliteral">&quot;:&quot;</span>, 1)  <span class="comment"># Split header line into key and value</span></div>
<div class="line"><span class="lineno">  168</span>        headers[<a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">key.strip</a>()] = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">value.strip</a>()  <span class="comment"># Store header in dictionary, stripping whitespace</span></div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="comment"># Extract the body, which comes after a double CRLF sequence (\r\n\r\n)</span></div>
<div class="line"><span class="lineno">  171</span>    body = <a class="code hl_enumeration" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85ea">response_str.split</a>(<span class="stringliteral">&#39;\r\n\r\n&#39;</span>, 1)[1] <span class="keywordflow">if</span> <span class="stringliteral">&#39;\r\n\r\n&#39;</span> <span class="keywordflow">in</span> response_str <span class="keywordflow">else</span> <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>    <span class="comment"># Return the parsed response as a dictionary</span></div>
<div class="line"><span class="lineno">  174</span>    <span class="keywordflow">return</span> {</div>
<div class="line"><span class="lineno">  175</span>        <span class="stringliteral">&quot;status_code&quot;</span>: status_code,</div>
<div class="line"><span class="lineno">  176</span>        <span class="stringliteral">&quot;headers&quot;</span>: headers,</div>
<div class="line"><span class="lineno">  177</span>        <span class="stringliteral">&quot;body&quot;</span>: body</div>
<div class="line"><span class="lineno">  178</span>    }</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceutils.html">utils</a></li><li class="navelem"><a class="el" href="namespaceutils_1_1utils.html">utils</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
