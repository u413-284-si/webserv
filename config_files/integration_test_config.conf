http {
    server {
        listen 127.0.0.1:8080;
        server_name default;

        location / {
        	root /workspaces/webserv/html;
            index index.html;
            error_page 404 /error404.html;
        }

        location /directory/ {
            root /workspaces/webserv/html;
            autoindex on;
        }

		location /alias/ {
			alias /workspaces/webserv/html/images/;
		}

        location /error {
            root /workspaces/webserv/html/error;
        }

        location /secret/ {
            root /workspaces/webserv/html;
            error_page 403 /error403.html;
        }

        location /uploads/ {
            root /workspaces/webserv/html;
            allow_methods POST;
        }

        location /redirect {
            return 301 /secret;
        }

        location /strange {
            return 200 "Return Message";
        }

        location /another {
            return 403;
            error_page 403 /strange;
        }

        location /cgi-bin {
            root /workspaces/webserv;
            cgi_path /usr/bin/bash;
            cgi_ext .sh;
            allow_methods GET POST;
        }

		location /health {
			return 200;
		}

		location /missingIndex/ {
			alias /workspaces/webserv/html/css/;
			index index.html;
			index index.php;
			index index.htm;
		}

		location /tty {
			root /dev;
		}

		location /recursion/ {
			root /workspaces/webserv/html;
			index recursion/;
		}
    }

    server {
        listen 127.0.0.1:8090;
        server_name doc;

        location / {
            root /workspaces/webserv/html;
            index index.html;
            error_page 404 /error404.html;
        }
    }

    server {
        listen 127.0.0.1:8081;
        server_name cgi;

        location /cgi-bin {
            root /workspaces/webserv;
            cgi_path /usr/bin/python3;
            cgi_ext .py;
            allow_methods GET POST;
        }
    }

    server {
        listen 127.0.0.1:8090;
        server_name duplicate;

        location / {
            root /workspaces/webserv/html;
            index index.html;
            error_page 404 /error404.html;
        }
    }
}