<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=11" />
	<meta name="generator" content="Doxygen 1.9.1" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>webserv: CGIHandler Class Reference</title>
	<link href="tabs.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="dynsections.js"></script>
	<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
	<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
	<link href="doxygen.css" rel="stylesheet" type="text/css" />
	<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
	<script type="text/javascript">
		DoxygenAwesomeDarkModeToggle.init()
	</script>
	<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
	<script type="text/javascript">
		DoxygenAwesomeFragmentCopyButton.init()
	</script>
	<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
	<script type="text/javascript">
		DoxygenAwesomeParagraphLink.init()
	</script>
</head>
<body>
		<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
			<div id="titlearea">
				<table cellspacing="0" cellpadding="0">
					<tbody>
						<tr id="projectrow">
							<td id="projectalign">
								<div id="projectname">webserv
								</div>
								<div id="projectbrief">This is when you finally understand why a URL starts with HTTP.</div>
							</td>
						</tr>
						<!--BEGIN FULL_SIDEBAR-->
						<tr>
							<td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
						</tr>
						<!--END FULL_SIDEBAR-->
					</tbody>
				</table>
			</div>
			<!-- end header part --><!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_c_g_i_handler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_c_g_i_handler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CGIHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_c_g_i_handler_8hpp_source.html">CGIHandler.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af2fe74a0b25abfed3cd0aa39c0e26659"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_g_i_handler.html#af2fe74a0b25abfed3cd0aa39c0e26659">CGIHandler</a> (<a class="el" href="struct_connection.html">Connection</a> &amp;connection, const <a class="el" href="class_process_ops.html">ProcessOps</a> &amp;processOps)</td></tr>
<tr class="memdesc:af2fe74a0b25abfed3cd0aa39c0e26659"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_c_g_i_handler.html">CGIHandler</a> object and sets up the environment for the CGI script.  <a href="class_c_g_i_handler.html#af2fe74a0b25abfed3cd0aa39c0e26659">More...</a><br /></td></tr>
<tr class="separator:af2fe74a0b25abfed3cd0aa39c0e26659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341ca7c3cad04848c5e0787341fa573e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_g_i_handler.html#a341ca7c3cad04848c5e0787341fa573e">execute</a> (int epollFd, const std::map&lt; int, <a class="el" href="struct_connection.html">Connection</a> &gt; &amp;connections, const std::map&lt; int, <a class="el" href="struct_connection.html">Connection</a> * &gt; &amp;cgiConnections)</td></tr>
<tr class="memdesc:a341ca7c3cad04848c5e0787341fa573e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the CGI script for the given HTTP request.  <a href="class_c_g_i_handler.html#a341ca7c3cad04848c5e0787341fa573e">More...</a><br /></td></tr>
<tr class="separator:a341ca7c3cad04848c5e0787341fa573e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43aa92ff8b5cb104442133fe3834dfc1"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_g_i_handler.html#a43aa92ff8b5cb104442133fe3834dfc1">getCGIPath</a> () const</td></tr>
<tr class="memdesc:a43aa92ff8b5cb104442133fe3834dfc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the path to the CGI interpreter.  <a href="class_c_g_i_handler.html#a43aa92ff8b5cb104442133fe3834dfc1">More...</a><br /></td></tr>
<tr class="separator:a43aa92ff8b5cb104442133fe3834dfc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bf974fc754011f3b0d77027d17bcee0"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_g_i_handler.html#a5bf974fc754011f3b0d77027d17bcee0">getCGIExt</a> () const</td></tr>
<tr class="memdesc:a5bf974fc754011f3b0d77027d17bcee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the file extension associated with the CGI script.  <a href="class_c_g_i_handler.html#a5bf974fc754011f3b0d77027d17bcee0">More...</a><br /></td></tr>
<tr class="separator:a5bf974fc754011f3b0d77027d17bcee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae6b53b937e5bb0d428d1ab3cc786d0"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; std::string &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_g_i_handler.html#aaae6b53b937e5bb0d428d1ab3cc786d0">getEnv</a> () const</td></tr>
<tr class="memdesc:aaae6b53b937e5bb0d428d1ab3cc786d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the environment variables set for the CGI script.  <a href="class_c_g_i_handler.html#aaae6b53b937e5bb0d428d1ab3cc786d0">More...</a><br /></td></tr>
<tr class="separator:aaae6b53b937e5bb0d428d1ab3cc786d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8be0b38c06980f93297fc521a7927348"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; std::string &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_g_i_handler.html#a8be0b38c06980f93297fc521a7927348">getArgv</a> () const</td></tr>
<tr class="memdesc:a8be0b38c06980f93297fc521a7927348"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the arguments set for the CGI script.  <a href="class_c_g_i_handler.html#a8be0b38c06980f93297fc521a7927348">More...</a><br /></td></tr>
<tr class="separator:a8be0b38c06980f93297fc521a7927348"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8hpp_source.html#l00026">26</a> of file <a class="el" href="_c_g_i_handler_8hpp_source.html">CGIHandler.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af2fe74a0b25abfed3cd0aa39c0e26659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2fe74a0b25abfed3cd0aa39c0e26659">&#9670;&nbsp;</a></span>CGIHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CGIHandler::CGIHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_connection.html">Connection</a> &amp;&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_process_ops.html">ProcessOps</a> &amp;&#160;</td>
          <td class="paramname"><em>processOps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="class_c_g_i_handler.html">CGIHandler</a> object and sets up the environment for the CGI script. </p>
<p>This constructor initializes the <a class="el" href="class_c_g_i_handler.html">CGIHandler</a> with the provided connection object. It sets up various environment variables required for the CGI script, creates pipes for inter-process communication, and prepares input parameters for the execve system call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>Reference to a <a class="el" href="struct_connection.html" title="Represents a connection between a server and a client.">Connection</a> object containing details about the current request and connection. </td></tr>
    <tr><td class="paramname">processOps</td><td>A reference to the <a class="el" href="class_process_ops.html" title="Wrapper class for process-related functions.">ProcessOps</a> object for handling process operations.</td></tr>
  </table>
  </dd>
</dl>
<p>Environment variables set:</p><ul>
<li>CONTENT_LENGTH: Length of the content, if provided in the request headers.</li>
<li>CONTENT_TYPE: Type of the content, if provided in the request headers.</li>
<li>GATEWAY_INTERFACE: Version of the CGI interface.</li>
<li>PATH_INFO: Additional path information following the script name.</li>
<li>PATH_TRANSLATED: Actual file system path of the PATH_INFO resource.</li>
<li>QUERY_STRING: Query string following the <a class="el" href="struct_u_r_i.html">URI</a> path.</li>
<li>REDIRECT_STATUS: Indicates successful internal redirection to the script.</li>
<li>REMOTE_ADDR: IP address of the client.</li>
<li>REMOTE_PORT: Port of the client.</li>
<li>REQUEST_METHOD: HTTP method of the request.</li>
<li>REQUEST_URI: Full request <a class="el" href="struct_u_r_i.html">URI</a>.</li>
<li>SCRIPT_NAME: <a class="el" href="struct_u_r_i.html">URI</a> path of the CGI script until the script extension.</li>
<li>SCRIPT_FILENAME: Actual file system path of the CGI script being executed.</li>
<li>SERVER_ADDR: IP address of the server.</li>
<li>SERVER_NAME: Name of the server.</li>
<li>SERVER_PORT: Port of the server.</li>
<li>SERVER_PROTOCOL: Protocol used by the server.</li>
<li>SERVER_SOFTWARE: Software name and version of the server.</li>
<li>SYSTEM_ROOT: Root directory of the server.</li>
</ul>
<p>Pipes created:</p><ul>
<li>m_pipeIn: Pipe for input communication.</li>
<li>m_pipeOut: Pipe for output communication.</li>
</ul>
<p>If pipe creation fails, the request's HTTP status is set to StatusInternalServerError.</p>
<p>The constructor also calls setEnvp() to set the environment variables and setArgv() to set the arguments for the execve system call. </p>

<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8cpp_source.html#l00045">45</a> of file <a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    : m_processOps(processOps)</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    , m_cgiPath(connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>-&gt;cgiPath)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    , m_cgiExt(connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>-&gt;cgiExt)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    , m_pipeIn()</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    , m_pipeOut()</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    , m_pipeToCGIWriteEnd(connection.<a class="code" href="struct_connection.html#ac318cf734aa441020ffb03ec67564985">m_pipeToCGIWriteEnd</a>)</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    , m_pipeFromCGIReadEnd(connection.<a class="code" href="struct_connection.html#aef664543be678acdc3121965feadc51b">m_pipeFromCGIReadEnd</a>)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    , m_cgiPid(connection.<a class="code" href="struct_connection.html#ac38ba2b55c7b4b96c36ae75316de2a6f">m_cgiPid</a>)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    , m_request(connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>)</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    , m_location(connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">/* ========= Set up environment for CGI script ========= */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span> (connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">headers</a>.find(<span class="stringliteral">&quot;Content-Length&quot;</span>) != connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">headers</a>.end())</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        m_env.push_back(<span class="stringliteral">&quot;CONTENT_LENGTH=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">headers</a>.at(<span class="stringliteral">&quot;Content-Length&quot;</span>));</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">headers</a>.find(<span class="stringliteral">&quot;Content-Type&quot;</span>) != connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">headers</a>.end())</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        m_env.push_back(<span class="stringliteral">&quot;CONTENT_TYPE=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">headers</a>.at(<span class="stringliteral">&quot;Content-Type&quot;</span>));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;GATEWAY_INTERFACE=CGI/1.1&quot;</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">const</span> std::string pathInfo = extractPathInfo(connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a8f0516b557f9a1dee237d00e48aaac69">uri</a>.<a class="code" href="struct_u_r_i.html#a18b7b6f3328197824e58dc4cf46301df">path</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;PATH_INFO=&quot;</span> + pathInfo);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;PATH_TRANSLATED=&quot;</span> + connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>-&gt;root + pathInfo);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;QUERY_STRING=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a8f0516b557f9a1dee237d00e48aaac69">uri</a>.<a class="code" href="struct_u_r_i.html#a146c27ea8ef0e7887872df7a8181761a">query</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;REDIRECT_STATUS=200&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;REMOTE_ADDR=&quot;</span> + connection.<a class="code" href="struct_connection.html#a244c1b9870181fb1c847758d21e2c8b3">m_clientSocket</a>.<a class="code" href="struct_socket.html#a986f7cf6e2d3334e9ad91a35681c1f80">host</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;REMOTE_PORT=&quot;</span> + connection.<a class="code" href="struct_connection.html#a244c1b9870181fb1c847758d21e2c8b3">m_clientSocket</a>.<a class="code" href="struct_socket.html#af75711bf9c0f0788d7767f836a97c5e6">port</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;REQUEST_METHOD=&quot;</span> + <a class="code" href="namespacewebutils.html#a66980bbe8e553002953513c019d20f19">webutils::methodToString</a>(connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a67c428c2e03ff5e9e3fc4403ba9377a9">method</a>));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;REQUEST_URI=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a8f0516b557f9a1dee237d00e48aaac69">uri</a>.<a class="code" href="struct_u_r_i.html#a18b7b6f3328197824e58dc4cf46301df">path</a> + <span class="charliteral">&#39;?&#39;</span> + connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a8f0516b557f9a1dee237d00e48aaac69">uri</a>.<a class="code" href="struct_u_r_i.html#a146c27ea8ef0e7887872df7a8181761a">query</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">const</span> std::string scriptPath = extractScriptPath(connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a8f0516b557f9a1dee237d00e48aaac69">uri</a>.<a class="code" href="struct_u_r_i.html#a18b7b6f3328197824e58dc4cf46301df">path</a>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SCRIPT_NAME=&quot;</span> + scriptPath);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SCRIPT_FILENAME=&quot;</span> + connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>-&gt;root + scriptPath);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SERVER_ADDR=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae9c64be721ccc3676197f3ebbb58fe18">m_serverSocket</a>.<a class="code" href="struct_socket.html#a986f7cf6e2d3334e9ad91a35681c1f80">host</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SERVER_NAME=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae9c64be721ccc3676197f3ebbb58fe18">m_serverSocket</a>.<a class="code" href="struct_socket.html#a986f7cf6e2d3334e9ad91a35681c1f80">host</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SERVER_PORT=&quot;</span> + connection.<a class="code" href="struct_connection.html#ae9c64be721ccc3676197f3ebbb58fe18">m_serverSocket</a>.<a class="code" href="struct_socket.html#af75711bf9c0f0788d7767f836a97c5e6">port</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SERVER_PROTOCOL=HTTP/1.1&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SERVER_SOFTWARE=Trihard/1.0.0&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    m_env.push_back(<span class="stringliteral">&quot;SYSTEM_ROOT=&quot;</span> + connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>-&gt;root);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">/* ========= Set up arguments for CGI script ========= */</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    m_argv.push_back(m_cgiPath);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    m_argv.push_back(connection.<a class="code" href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">location</a>-&gt;root + scriptPath);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">/* ========= Create pipes for inter-process communication ========= */</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    m_pipeIn[0] = -1;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    m_pipeIn[1] = -1;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    m_pipeOut[0] = -1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    m_pipeOut[1] = -1;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a67c428c2e03ff5e9e3fc4403ba9377a9">method</a> == <a class="code" href="_method_8hpp.html#a2a3c0067e44c5ef3210a256d06c16b0fa81232731cae6bc0dd9cf041d9c91a926">MethodPost</a>) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> (m_processOps.<a class="code" href="class_process_ops.html#ab0eb7fe523ca1f8d49c62a8a9a0e6991">pipeProcess</a>(m_pipeIn) == -1)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a4ab3aefab7679eeb2b4e97f7043bdff3">httpStatus</a> = <a class="code" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85eaa9a10085fda0665e4093f44aff66484bc">StatusInternalServerError</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        m_pipeToCGIWriteEnd = m_pipeIn[1];</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (m_processOps.<a class="code" href="class_process_ops.html#ab0eb7fe523ca1f8d49c62a8a9a0e6991">pipeProcess</a>(m_pipeOut) == -1) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="namespacewebutils.html#ad74875f464c74bd45589002fc385605e">webutils::closeFd</a>(m_pipeIn[0]);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="namespacewebutils.html#ad74875f464c74bd45589002fc385605e">webutils::closeFd</a>(m_pipeIn[1]);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        connection.<a class="code" href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">m_request</a>.<a class="code" href="struct_h_t_t_p_request.html#a4ab3aefab7679eeb2b4e97f7043bdff3">httpStatus</a> = <a class="code" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85eaa9a10085fda0665e4093f44aff66484bc">StatusInternalServerError</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    m_pipeFromCGIReadEnd = m_pipeOut[0];</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment">/* ========= Create input parameters for execve ========= */</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    setEnvp();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    setArgv();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="a_method_8hpp_html_a2a3c0067e44c5ef3210a256d06c16b0fa81232731cae6bc0dd9cf041d9c91a926"><div class="ttname"><a href="_method_8hpp.html#a2a3c0067e44c5ef3210a256d06c16b0fa81232731cae6bc0dd9cf041d9c91a926">MethodPost</a></div><div class="ttdeci">@ MethodPost</div><div class="ttdef"><b>Definition:</b> <a href="_method_8hpp_source.html#l00003">Method.hpp:3</a></div></div>
<div class="ttc" id="a_status_code_8hpp_html_a0506d82d6e3d6758981ff5eac9ca85eaa9a10085fda0665e4093f44aff66484bc"><div class="ttname"><a href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85eaa9a10085fda0665e4093f44aff66484bc">StatusInternalServerError</a></div><div class="ttdeci">@ StatusInternalServerError</div><div class="ttdef"><b>Definition:</b> <a href="_status_code_8hpp_source.html#l00016">StatusCode.hpp:16</a></div></div>
<div class="ttc" id="aclass_process_ops_html_ab0eb7fe523ca1f8d49c62a8a9a0e6991"><div class="ttname"><a href="class_process_ops.html#ab0eb7fe523ca1f8d49c62a8a9a0e6991">ProcessOps::pipeProcess</a></div><div class="ttdeci">virtual int pipeProcess(int pipefd[2]) const</div><div class="ttdoc">Creates a pipe and stores the file descriptors in the provided array.</div><div class="ttdef"><b>Definition:</b> <a href="_process_ops_8cpp_source.html#l00024">ProcessOps.cpp:24</a></div></div>
<div class="ttc" id="anamespacewebutils_html_a66980bbe8e553002953513c019d20f19"><div class="ttname"><a href="namespacewebutils.html#a66980bbe8e553002953513c019d20f19">webutils::methodToString</a></div><div class="ttdeci">std::string methodToString(Method method)</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00172">utilities.cpp:172</a></div></div>
<div class="ttc" id="anamespacewebutils_html_ad74875f464c74bd45589002fc385605e"><div class="ttname"><a href="namespacewebutils.html#ad74875f464c74bd45589002fc385605e">webutils::closeFd</a></div><div class="ttdeci">void closeFd(int &amp;fileDescriptor)</div><div class="ttdef"><b>Definition:</b> <a href="utilities_8cpp_source.html#l00189">utilities.cpp:189</a></div></div>
<div class="ttc" id="astruct_connection_html_a244c1b9870181fb1c847758d21e2c8b3"><div class="ttname"><a href="struct_connection.html#a244c1b9870181fb1c847758d21e2c8b3">Connection::m_clientSocket</a></div><div class="ttdeci">Socket m_clientSocket</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00034">Connection.hpp:34</a></div></div>
<div class="ttc" id="astruct_connection_html_ac318cf734aa441020ffb03ec67564985"><div class="ttname"><a href="struct_connection.html#ac318cf734aa441020ffb03ec67564985">Connection::m_pipeToCGIWriteEnd</a></div><div class="ttdeci">int m_pipeToCGIWriteEnd</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00042">Connection.hpp:42</a></div></div>
<div class="ttc" id="astruct_connection_html_ac38ba2b55c7b4b96c36ae75316de2a6f"><div class="ttname"><a href="struct_connection.html#ac38ba2b55c7b4b96c36ae75316de2a6f">Connection::m_cgiPid</a></div><div class="ttdeci">pid_t m_cgiPid</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00044">Connection.hpp:44</a></div></div>
<div class="ttc" id="astruct_connection_html_ae94a8a88f07c64cf17ada17c7e670ada"><div class="ttname"><a href="struct_connection.html#ae94a8a88f07c64cf17ada17c7e670ada">Connection::m_request</a></div><div class="ttdeci">HTTPRequest m_request</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00039">Connection.hpp:39</a></div></div>
<div class="ttc" id="astruct_connection_html_ae9c64be721ccc3676197f3ebbb58fe18"><div class="ttname"><a href="struct_connection.html#ae9c64be721ccc3676197f3ebbb58fe18">Connection::m_serverSocket</a></div><div class="ttdeci">Socket m_serverSocket</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00033">Connection.hpp:33</a></div></div>
<div class="ttc" id="astruct_connection_html_aef664543be678acdc3121965feadc51b"><div class="ttname"><a href="struct_connection.html#aef664543be678acdc3121965feadc51b">Connection::m_pipeFromCGIReadEnd</a></div><div class="ttdeci">int m_pipeFromCGIReadEnd</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00043">Connection.hpp:43</a></div></div>
<div class="ttc" id="astruct_connection_html_afff86c74740618d83bab5af4f34d10af"><div class="ttname"><a href="struct_connection.html#afff86c74740618d83bab5af4f34d10af">Connection::location</a></div><div class="ttdeci">std::vector&lt; Location &gt;::const_iterator location</div><div class="ttdef"><b>Definition:</b> <a href="_connection_8hpp_source.html#l00041">Connection.hpp:41</a></div></div>
<div class="ttc" id="astruct_h_t_t_p_request_html_a4ab3aefab7679eeb2b4e97f7043bdff3"><div class="ttname"><a href="struct_h_t_t_p_request.html#a4ab3aefab7679eeb2b4e97f7043bdff3">HTTPRequest::httpStatus</a></div><div class="ttdeci">statusCode httpStatus</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_t_p_request_8hpp_source.html#l00027">HTTPRequest.hpp:27</a></div></div>
<div class="ttc" id="astruct_h_t_t_p_request_html_a67c428c2e03ff5e9e3fc4403ba9377a9"><div class="ttname"><a href="struct_h_t_t_p_request.html#a67c428c2e03ff5e9e3fc4403ba9377a9">HTTPRequest::method</a></div><div class="ttdeci">Method method</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_t_p_request_8hpp_source.html#l00022">HTTPRequest.hpp:22</a></div></div>
<div class="ttc" id="astruct_h_t_t_p_request_html_a7f295acd62075df13848bd3103c89bbf"><div class="ttname"><a href="struct_h_t_t_p_request.html#a7f295acd62075df13848bd3103c89bbf">HTTPRequest::headers</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; headers</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_t_p_request_8hpp_source.html#l00025">HTTPRequest.hpp:25</a></div></div>
<div class="ttc" id="astruct_h_t_t_p_request_html_a8f0516b557f9a1dee237d00e48aaac69"><div class="ttname"><a href="struct_h_t_t_p_request.html#a8f0516b557f9a1dee237d00e48aaac69">HTTPRequest::uri</a></div><div class="ttdeci">URI uri</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_t_p_request_8hpp_source.html#l00023">HTTPRequest.hpp:23</a></div></div>
<div class="ttc" id="astruct_socket_html_a986f7cf6e2d3334e9ad91a35681c1f80"><div class="ttname"><a href="struct_socket.html#a986f7cf6e2d3334e9ad91a35681c1f80">Socket::host</a></div><div class="ttdeci">std::string host</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8hpp_source.html#l00009">Socket.hpp:9</a></div></div>
<div class="ttc" id="astruct_socket_html_af75711bf9c0f0788d7767f836a97c5e6"><div class="ttname"><a href="struct_socket.html#af75711bf9c0f0788d7767f836a97c5e6">Socket::port</a></div><div class="ttdeci">std::string port</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8hpp_source.html#l00010">Socket.hpp:10</a></div></div>
<div class="ttc" id="astruct_u_r_i_html_a146c27ea8ef0e7887872df7a8181761a"><div class="ttname"><a href="struct_u_r_i.html#a146c27ea8ef0e7887872df7a8181761a">URI::query</a></div><div class="ttdeci">std::string query</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_t_p_request_8hpp_source.html#l00015">HTTPRequest.hpp:15</a></div></div>
<div class="ttc" id="astruct_u_r_i_html_a18b7b6f3328197824e58dc4cf46301df"><div class="ttname"><a href="struct_u_r_i.html#a18b7b6f3328197824e58dc4cf46301df">URI::path</a></div><div class="ttdeci">std::string path</div><div class="ttdef"><b>Definition:</b> <a href="_h_t_t_p_request_8hpp_source.html#l00014">HTTPRequest.hpp:14</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_af2fe74a0b25abfed3cd0aa39c0e26659_cgraph.svg" width="424" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a341ca7c3cad04848c5e0787341fa573e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a341ca7c3cad04848c5e0787341fa573e">&#9670;&nbsp;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CGIHandler::execute </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>epollFd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, <a class="el" href="struct_connection.html">Connection</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>connections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; int, <a class="el" href="struct_connection.html">Connection</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>cgiConnections</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes the CGI script for the given HTTP request. </p>
<p>This function forks a new process to handle the CGI script execution. The child process sets up the necessary pipes for communication, changes the working directory, and executes the CGI script using execve. The parent process closes the unused ends of the pipes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">epollFd</td><td>The file descriptor for the epoll instance. </td></tr>
    <tr><td class="paramname">connections</td><td>A map of file descriptors to <a class="el" href="struct_connection.html" title="Represents a connection between a server and a client.">Connection</a> objects. </td></tr>
    <tr><td class="paramname">cgiConnections</td><td>A map of file descriptors to <a class="el" href="struct_connection.html" title="Represents a connection between a server and a client.">Connection</a> pointers for CGI connections.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If the fork operation fails, the function logs an error, closes the pipes, sets the HTTP status to internal server error, and returns. If the child process encounters an error while setting up signals, changing the directory, or executing the CGI script, it writes an HTTP 500 error to stdout and exits. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8cpp_source.html#l00179">179</a> of file <a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (m_processOps.<a class="code" href="class_process_ops.html#a189432b145784c422f4ac6ec515a9984">forkProcess</a>(m_cgiPid) == -1) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        closePipes();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        m_request.<a class="code" href="struct_h_t_t_p_request.html#a4ab3aefab7679eeb2b4e97f7043bdff3">httpStatus</a> = <a class="code" href="_status_code_8hpp.html#a0506d82d6e3d6758981ff5eac9ca85eaa9a10085fda0665e4093f44aff66484bc">StatusInternalServerError</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (m_cgiPid == 0) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="_c_g_i_handler_8cpp.html#ac74e9d3eec8d4845380648b9770ac359">registerChildSignals</a>()) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            closeAllFds(epollFd, connections, cgiConnections);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            std::exit(EXIT_FAILURE);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// Replace child stdin with read end of input pipe</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (m_request.<a class="code" href="struct_h_t_t_p_request.html#a67c428c2e03ff5e9e3fc4403ba9377a9">method</a> == <a class="code" href="_method_8hpp.html#a2a3c0067e44c5ef3210a256d06c16b0fa81232731cae6bc0dd9cf041d9c91a926">MethodPost</a> &amp;&amp; m_processOps.<a class="code" href="class_process_ops.html#ae4e6a35e4b926fae2e781ce14212dc65">dup2Process</a>(m_pipeIn[0], STDIN_FILENO) == -1) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            closeAllFds(epollFd, connections, cgiConnections);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            std::exit(EXIT_FAILURE);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// Replace child stdout with write end of output pipe</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span> (m_processOps.<a class="code" href="class_process_ops.html#ae4e6a35e4b926fae2e781ce14212dc65">dup2Process</a>(m_pipeOut[1], STDOUT_FILENO) == -1) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            closeAllFds(epollFd, connections, cgiConnections);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            std::exit(EXIT_FAILURE);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        closeAllFds(epollFd, connections, cgiConnections);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        std::string workingDir = m_location-&gt;root + m_location-&gt;path;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (m_processOps.<a class="code" href="class_process_ops.html#a4bac2dd02d30149ea779a6b3f7adb281">chdirProcess</a>(workingDir.c_str()) == -1)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            std::exit(EXIT_FAILURE);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span> (m_processOps.<a class="code" href="class_process_ops.html#abc683607d42b4daab6b710a214c968eb">execProcess</a>(m_argvp[0], m_argvp.data(), m_envp.data()) == -1)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            std::exit(EXIT_FAILURE);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment">// Close read end of input pipe in parent process</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="namespacewebutils.html#ad74875f464c74bd45589002fc385605e">webutils::closeFd</a>(m_pipeIn[0]);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// Close write end of output pipe in parent process</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="namespacewebutils.html#ad74875f464c74bd45589002fc385605e">webutils::closeFd</a>(m_pipeOut[1]);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
<div class="ttc" id="a_c_g_i_handler_8cpp_html_ac74e9d3eec8d4845380648b9770ac359"><div class="ttname"><a href="_c_g_i_handler_8cpp.html#ac74e9d3eec8d4845380648b9770ac359">registerChildSignals</a></div><div class="ttdeci">bool registerChildSignals()</div><div class="ttdoc">Registers signal handlers for child processes.</div><div class="ttdef"><b>Definition:</b> <a href="_c_g_i_handler_8cpp_source.html#l00303">CGIHandler.cpp:303</a></div></div>
<div class="ttc" id="aclass_process_ops_html_a189432b145784c422f4ac6ec515a9984"><div class="ttname"><a href="class_process_ops.html#a189432b145784c422f4ac6ec515a9984">ProcessOps::forkProcess</a></div><div class="ttdeci">virtual int forkProcess(pid_t &amp;pid) const</div><div class="ttdoc">Forks the current process.</div><div class="ttdef"><b>Definition:</b> <a href="_process_ops_8cpp_source.html#l00080">ProcessOps.cpp:80</a></div></div>
<div class="ttc" id="aclass_process_ops_html_a4bac2dd02d30149ea779a6b3f7adb281"><div class="ttname"><a href="class_process_ops.html#a4bac2dd02d30149ea779a6b3f7adb281">ProcessOps::chdirProcess</a></div><div class="ttdeci">virtual int chdirProcess(const char *path) const</div><div class="ttdoc">Changes the current working directory.</div><div class="ttdef"><b>Definition:</b> <a href="_process_ops_8cpp_source.html#l00061">ProcessOps.cpp:61</a></div></div>
<div class="ttc" id="aclass_process_ops_html_abc683607d42b4daab6b710a214c968eb"><div class="ttname"><a href="class_process_ops.html#abc683607d42b4daab6b710a214c968eb">ProcessOps::execProcess</a></div><div class="ttdeci">virtual int execProcess(const char *pathname, char *const argv[], char *const envp[]) const</div><div class="ttdoc">Executes a new process image specified by the given pathname.</div><div class="ttdef"><b>Definition:</b> <a href="_process_ops_8cpp_source.html#l00105">ProcessOps.cpp:105</a></div></div>
<div class="ttc" id="aclass_process_ops_html_ae4e6a35e4b926fae2e781ce14212dc65"><div class="ttname"><a href="class_process_ops.html#ae4e6a35e4b926fae2e781ce14212dc65">ProcessOps::dup2Process</a></div><div class="ttdeci">virtual int dup2Process(int oldfd, int newfd) const</div><div class="ttdoc">Duplicates a file descriptor to a specified value.</div><div class="ttdef"><b>Definition:</b> <a href="_process_ops_8cpp_source.html#l00043">ProcessOps.cpp:43</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_a341ca7c3cad04848c5e0787341fa573e_cgraph.svg" width="100%" height="518"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_a341ca7c3cad04848c5e0787341fa573e_icgraph.svg" width="100%" height="423"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a43aa92ff8b5cb104442133fe3834dfc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43aa92ff8b5cb104442133fe3834dfc1">&#9670;&nbsp;</a></span>getCGIPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; CGIHandler::getCGIPath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the path to the CGI interpreter. </p>
<p>This function returns a constant reference to the path of the CGI interpreter used by the CGI handler. The CGI interpreter is the program that executes the CGI script.</p>
<dl class="section return"><dt>Returns</dt><dd>const std::string&amp; A constant reference to the path of the CGI interpreter. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8cpp_source.html#l00126">126</a> of file <a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{ <span class="keywordflow">return</span> m_cgiPath; }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_a43aa92ff8b5cb104442133fe3834dfc1_icgraph.svg" width="304" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a5bf974fc754011f3b0d77027d17bcee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bf974fc754011f3b0d77027d17bcee0">&#9670;&nbsp;</a></span>getCGIExt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; CGIHandler::getCGIExt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the file extension associated with the CGI script. </p>
<p>This function returns a constant reference to the file extension used to identify CGI scripts. The extension is typically used to determine how the server should handle the script.</p>
<dl class="section return"><dt>Returns</dt><dd>const std::string&amp; A constant reference to the file extension associated with CGI scripts. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8cpp_source.html#l00137">137</a> of file <a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{ <span class="keywordflow">return</span> m_cgiExt; }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_a5bf974fc754011f3b0d77027d17bcee0_icgraph.svg" width="298" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aaae6b53b937e5bb0d428d1ab3cc786d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaae6b53b937e5bb0d428d1ab3cc786d0">&#9670;&nbsp;</a></span>getEnv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt; std::string &gt; &amp; CGIHandler::getEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the environment variables set for the CGI script. </p>
<p>This function returns a constant reference to the environment variables set for the CGI script. The environment variables are used to provide information and configuration to the CGI script during execution.</p>
<dl class="section return"><dt>Returns</dt><dd>const std::vector&lt;std::string&gt;&amp; A constant reference to the environment variables. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8cpp_source.html#l00148">148</a> of file <a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{ <span class="keywordflow">return</span> m_env; }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_aaae6b53b937e5bb0d428d1ab3cc786d0_icgraph.svg" width="278" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8be0b38c06980f93297fc521a7927348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8be0b38c06980f93297fc521a7927348">&#9670;&nbsp;</a></span>getArgv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt; std::string &gt; &amp; CGIHandler::getArgv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the arguments set for the CGI script. </p>
<p>This function returns a constant reference to the arguments set for the CGI script. The arguments are used to provide the executable path and its arguments to the CGI script during execution.</p>
<dl class="section return"><dt>Returns</dt><dd>const std::vector&lt;std::string&gt;&amp; A constant reference to the arguments. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_c_g_i_handler_8cpp_source.html#l00159">159</a> of file <a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{ <span class="keywordflow">return</span> m_argv; }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_g_i_handler_a8be0b38c06980f93297fc521a7927348_icgraph.svg" width="283" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>inc/<a class="el" href="_c_g_i_handler_8hpp_source.html">CGIHandler.hpp</a></li>
<li>src/<a class="el" href="_c_g_i_handler_8cpp_source.html">CGIHandler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_c_g_i_handler.html">CGIHandler</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
